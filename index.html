<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cestovn√≠ p≈ô√≠kaz ‚Äì Gener√°tor</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a2e">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='8' fill='%23e94560'/%3E%3Cpath d='M8 12h16M8 16h12M8 20h14M22 10l4 6-4 6' stroke='%23fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <header class="app-header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="8" fill="#e94560"/>
                    <path d="M8 12h16M8 16h12M8 20h14M22 10l4 6-4 6" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div>
                    <h1>Cestovn√≠ p≈ô√≠kaz</h1>
                    <span class="subtitle">Gener√°tor & vy√∫ƒçtov√°n√≠</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn-ghost" id="btnFavorites" title="Obl√≠ben√© trasy">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    <span class="btn-label">Obl√≠ben√©</span>
                </button>
                <button class="btn btn-ghost" id="btnHistory" title="Historie">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    <span class="btn-label">Historie</span>
                </button>
            </div>
        </header>

        <main class="main-content">
            <!-- Form Type Selector -->
            <section class="card type-selector">
                <div class="card-header">
                    <h2>Typ formul√°≈ôe</h2>
                </div>
                <div class="type-buttons">
                    <button class="type-btn active" data-type="club">
                        <span class="type-icon">üè∏</span>
                        <span class="type-name">Klubov√Ω cestovn√≠ p≈ô√≠kaz</span>
                        <span class="type-desc">Extraliga, turnaje</span>
                    </button>
                    <button class="type-btn" data-type="cbas">
                        <span class="type-icon">üèõÔ∏è</span>
                        <span class="type-name">Svazov√Ω cestovn√≠ p≈ô√≠kaz</span>
                        <span class="type-desc">ƒåBaS ‚Äì dvoustrann√Ω</span>
                    </button>
                </div>
            </section>

            <!-- Personal Info -->
            <section class="card" id="sectionPersonal">
                <div class="card-header">
                    <h2>Osobn√≠ √∫daje</h2>
                    <button class="btn btn-sm btn-ghost" id="btnSaveProfile" title="Ulo≈æit jako v√Ωchoz√≠ profil">Ulo≈æit profil</button>
                </div>
                <div class="form-grid">
                    <div class="form-group span-2">
                        <label for="fullName">P≈ô√≠jmen√≠, jm√©no, titul</label>
                        <input type="text" id="fullName" placeholder="nap≈ô. Maz√∫r Jakub">
                    </div>
                    <div class="form-group span-2">
                        <label for="address">Bydli≈°tƒõ</label>
                        <input type="text" id="address" placeholder="nap≈ô. Kounicova 12, Brno">
                    </div>
                    <div class="form-group">
                        <label for="department">√ötvar</label>
                        <input type="text" id="department" placeholder="nap≈ô. Badminton">
                    </div>
                    <div class="form-group">
                        <label for="personalNumber">Osobn√≠ ƒç√≠slo</label>
                        <input type="text" id="personalNumber">
                    </div>
                    <div class="form-group">
                        <label for="phone">Telefon</label>
                        <input type="text" id="phone">
                    </div>
                    <div class="form-group">
                        <label for="bankAccount">ƒå√≠slo √∫ƒçtu</label>
                        <input type="text" id="bankAccount" placeholder="nap≈ô. 123456789/0100">
                    </div>
                </div>
            </section>

            <!-- Trip Info -->
            <section class="card" id="sectionTrip">
                <div class="card-header">
                    <h2>√ödaje o cestƒõ</h2>
                </div>
                <div class="form-grid">
                    <div class="form-group span-2">
                        <label for="tripPurpose">√öƒçel a pr≈Øbƒõh cesty</label>
                        <input type="text" id="tripPurpose" placeholder="nap≈ô. Extraliga 2025/26">
                    </div>
                    <div class="form-group">
                        <label for="tripStart">Poƒç√°tek cesty (m√≠sto)</label>
                        <input type="text" id="tripStart" placeholder="nap≈ô. Brno">
                    </div>
                    <div class="form-group">
                        <label for="tripStartDate">Datum a ƒças odjezdu</label>
                        <input type="datetime-local" id="tripStartDate">
                    </div>
                    <div class="form-group">
                        <label for="tripDestination">M√≠sto jedn√°n√≠</label>
                        <input type="text" id="tripDestination" placeholder="nap≈ô. Ostrava">
                    </div>
                    <div class="form-group">
                        <label for="tripEndDate">Datum a ƒças n√°vratu</label>
                        <input type="datetime-local" id="tripEndDate">
                    </div>
                    <div class="form-group">
                        <label for="tripEnd">Konec cesty (m√≠sto)</label>
                        <input type="text" id="tripEnd" placeholder="nap≈ô. Brno">
                    </div>
                    <div class="form-group span-2">
                        <label for="companions">Spolucestuj√≠c√≠</label>
                        <input type="text" id="companions" placeholder="nap≈ô. Danielius Ber≈æanskis, Matƒõj Hub√°ƒçek">
                    </div>
                </div>
            </section>

            <!-- Vehicle & Rates -->
            <section class="card" id="sectionVehicle">
                <div class="card-header">
                    <h2>Dopravn√≠ prost≈ôedek</h2>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="vehicleType">Typ</label>
                        <select id="vehicleType">
                            <option value="AUV">AUV ‚Äì auto vlastn√≠</option>
                            <option value="AUS">AUS ‚Äì auto slu≈æebn√≠</option>
                            <option value="O">O ‚Äì osobn√≠ vlak</option>
                            <option value="R">R ‚Äì rychl√≠k</option>
                            <option value="A">A ‚Äì autobus</option>
                            <option value="L">L ‚Äì letadlo</option>
                            <option value="MOS">MOS ‚Äì motocykl slu≈æ.</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="vehiclePlate">SPZ / popis</label>
                        <input type="text" id="vehiclePlate" placeholder="nap≈ô. EL519DX">
                    </div>
                    <div class="form-group">
                        <label for="ratePerKm">Sazba Kƒç/km</label>
                        <input type="number" id="ratePerKm" value="4.50" step="0.10" min="0">
                    </div>
                    <div class="form-group">
                        <label for="surchargePercent">P≈ôir√°≈æka na poj√≠≈ædƒõn√≠ (%)</label>
                        <input type="number" id="surchargePercent" value="10" step="5" min="0" max="50">
                    </div>
                </div>
            </section>

            <!-- Legs / Route segments -->
            <section class="card" id="sectionLegs">
                <div class="card-header">
                    <h2>Trasy (√∫seky cesty)</h2>
                    <button class="btn btn-sm btn-primary" id="btnAddLeg">+ P≈ôidat √∫sek</button>
                </div>
                <div class="legs-info">
                    <p>Zadejte jednotliv√© √∫seky cesty. Kilometry se automaticky vyhledaj√≠ p≈ôes Mapy.cz Routing API a zaokrouhl√≠ na 5 km (+ p≈ôir√°≈æka). Tlaƒç√≠tkem ‚Ü© p≈ôid√°te zp√°teƒçn√≠ √∫sek.</p>
                </div>
                <div id="legsContainer"></div>
                <div class="legs-summary" id="legsSummary">
                    <div class="summary-item">
                        <span>Celkem km</span>
                        <strong id="totalKm">0</strong>
                    </div>
                    <div class="summary-item">
                        <span>Celkem j√≠zdn√©</span>
                        <strong id="totalFare">0 Kƒç</strong>
                    </div>
                </div>
            </section>

            <!-- Additional Costs -->
            <section class="card" id="sectionCosts">
                <div class="card-header">
                    <h2>Dal≈°√≠ n√°klady</h2>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="mealAllowance">Stravn√© (Kƒç)</label>
                        <input type="number" id="mealAllowance" value="0" min="0">
                        <span class="meal-hint" id="mealHint"></span>
                    </div>
                    <div class="form-group">
                        <label for="accommodation">Nocle≈æn√© (Kƒç)</label>
                        <input type="number" id="accommodation" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label for="otherCosts">Vedlej≈°√≠ v√Ωdaje (Kƒç)</label>
                        <input type="number" id="otherCosts" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label for="advance">Z√°loha (Kƒç)</label>
                        <input type="number" id="advance" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="freeFood"> Bezplatn√© stravov√°n√≠
                        </label>
                    </div>
                </div>
            </section>

            <!-- ƒåBaS-only fields -->
            <section class="card cbas-only" id="sectionCbas" style="display:none;">
                <div class="card-header">
                    <h2>Svazov√© √∫daje (ƒåBaS)</h2>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="opNumber">ƒå√≠slo OP</label>
                        <input type="text" id="opNumber">
                    </div>
                    <div class="form-group">
                        <label for="workHoursFrom">Pracovn√≠ doba od</label>
                        <input type="time" id="workHoursFrom">
                    </div>
                    <div class="form-group">
                        <label for="workHoursTo">Pracovn√≠ doba do</label>
                        <input type="time" id="workHoursTo">
                    </div>
                    <div class="form-group">
                        <label for="expectedCosts">P≈ôedpokl√°dan√° ƒç√°stka v√Ωdaj≈Ø (Kƒç)</label>
                        <input type="number" id="expectedCosts" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label for="advanceDate">Z√°loha vyplacen√° dne</label>
                        <input type="date" id="advanceDate">
                    </div>
                    <div class="form-group">
                        <label for="reportDate">Zpr√°va pod√°na dne</label>
                        <input type="date" id="reportDate">
                    </div>
                </div>
            </section>

            <!-- Generate -->
            <section class="card generate-section">
                <div class="generate-grid">
                    <div class="total-box">
                        <span class="total-label">Celkem k vyplacen√≠</span>
                        <span class="total-amount" id="grandTotal">0 Kƒç</span>
                    </div>
                    <div class="generate-actions">
                        <button class="btn btn-large btn-primary" id="btnGenerate">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                            Generovat PDF
                        </button>
                        <button class="btn btn-ghost" id="btnSaveDraft">Ulo≈æit koncept</button>
                        <button class="btn btn-ghost btn-danger" id="btnReset" title="Vymazat formul√°≈ô">Nov√Ω</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Favorites Modal -->
        <div class="modal" id="modalFavorites">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Obl√≠ben√© trasy</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body" id="favoritesBody">
                    <p class="empty-state">Zat√≠m ≈æ√°dn√© obl√≠ben√© trasy. Ulo≈æte trasu pomoc√≠ ‚≠ê u √∫seku cesty.</p>
                </div>
            </div>
        </div>

        <!-- History Modal -->
        <div class="modal" id="modalHistory">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Historie v√Ωkaz≈Ø</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body" id="historyBody">
                    <p class="empty-state">Zat√≠m ≈æ√°dn√© ulo≈æen√© v√Ωkazy.</p>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.2/jspdf.umd.min.js"
            integrity="sha512-qZvrmS2ekKPF2mSznTQsxqPgnpkI4DNTlrdUmTzrDgektczlKNRRhy5X5AAOnx5S09ydFYWWNSfcEqDTTHLQfUg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>
    <script>if(!window.jspdf)document.write('<script src="https://unpkg.com/jspdf@2.5.2/dist/jspdf.umd.min.js"><\/script>')</script>
    <script src="app.js"></script>
</body>
</html>
